<!-- 
	Copyright 2013 Push Technology Ltd

	Licensed under the Apache License, Version 2.0 (the "License");
	you may not use this file except in compliance with the License.
	You may obtain a copy of the License at

    	http://www.apache.org/licenses/LICENSE-2.0

	Unless required by applicable law or agreed to in writing, software
	distributed under the License is distributed on an "AS IS" BASIS,
	WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	See the License for the specific language governing permissions and
	limitations under the License.

-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Pragma" content="no-cache" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0;" />

    <!-- iPad/iPhone specific css below, add after your main css
    <link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="ipad.css" type="text/css" />        
    <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="iphone.css" type="text/css" />          -->
 
    <link rel="stylesheet" type="text/css" href="./css/app.css" />
    <title>FX Trader Demo</title>

	<script type="text/javascript" src="cordova-2.5.0.js"></script> 
	<script type="text/javascript" src="./js/jquery/jquery-1.7.1.min.js"></script>
	<script type="text/javascript" src="./js/jquery-ui/jquery-ui-1.8.16.custom.min.js"></script>
	<script type="text/javascript" src="./js/jquery-ui/jquery.ui.touch-punch.min.js"></script>
    <script type="text/javascript" src="./js/diffusion/diffusion.uncompressed.js"></script>

	<script type="text/javascript" src="./js/app/app.js"></script>
	<script type="text/javascript" src="./js/app/chart.js"></script>
	<script type="text/javascript" src="./js/app/widget.js"></script>
    <script type="text/javascript">
		$(function() {
			//document.addEventListener("deviceready", onDeviceReady, false);
			$('#profile').hide();
			// This object maps keys to field indexes that are returned by the topicMessage for each Trade
			var tradeTemplate = { stock : 2, trade : 5,	amount: 7, price : 6, user : 8, date : 3 };
			// Create new app with links to necessary elements
			var tradingApp = new App({
				blotter : {
					el : $('#blotter').find('tbody'),
					template: tradeTemplate
				},
				widgets : {
					el: $('#container')
				}
			});
			
			tradingApp.init();

			$('#view-blotter').click( function(e) {
				$('body').animate({ scrollTop : $('#blotter-container').offset().top }, 500);
			});
		 });
		
		/* When this function is called, PhoneGap has been initialized and is ready to roll */
		function onDeviceReady() {  }
    </script>

  </head>
	<body>
		<nav id="header">
			<img src="images/logo.png" class="logo" />
			<img src="images/icon.png" class="icon" />
			
			<div id="profile">
				<h2 id="profile-name"></h2>
				<div class="controls">
					<input type="checkbox" id="show-me">Receive only my trades</input>
				</div>
			</div>
			
		</nav>
		<ul id="container"></ul>
		<div id="blotter-container">
			<table id="blotter">
				<thead>
				<tr>
					<th>Stock</th>
					<th>Trade</th>
					<th>Amount</th>
					<th>Price</th>
					<th>User</th>
					<th>Time</th>
				</tr>
				</thead>
				<tbody>
				</tbody>
			</table>
		</div>
		<div id="chart-container">
			
		</div>
  </body>
</html>
